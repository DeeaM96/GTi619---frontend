<div *ngIf="!permission" >
  <app-noAccess/>
 </div>

<div class="container" *ngIf="permission">
  <h2>Utilisateurs</h2>

  <div class="create-button-container" style="text-align: right; margin-bottom: 10px;">
    <button mat-raised-button color="primary" (click)="createUser()">Créer un nouvel utilisateur</button>
  </div>
  <mat-table [dataSource]="dataSource" class="mat-elevation-z8" >
    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <mat-header-cell *matHeaderCellDef> Identifiant utilisateur </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.id}} </mat-cell>
    </ng-container>

    <!-- Username Column -->
    <ng-container matColumnDef="username">
      <mat-header-cell *matHeaderCellDef> Nom d'utilisateur </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.username}} </mat-cell>
    </ng-container>

    <!-- Email Column -->
    <ng-container matColumnDef="email">
      <mat-header-cell *matHeaderCellDef> Adresse email </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.email}} </mat-cell>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
      <mat-cell *matCellDef="let user">
        <button  class="btn-sm btn-primary pl-2 mr-2 " (click)="addRole(user)">Rôles</button>
        <button  class="btn-sm btn-primary" (click)="modifyPassword(user)">Modifier le mot de passe</button>
      </mat-cell>
    </ng-container>

    <!-- Header and Row Definitions -->
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>
</div>


